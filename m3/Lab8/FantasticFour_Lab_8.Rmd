---
title: "Lab_08"
author: "Fantastic Four"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```
# Who is Hiring us?
Fantastic Four is being hired by the American Red Cross in Honolulu, Hawaii to look at tsunami data. There are two reasons that this organization is hiring the team. First, they would like to map out all the tsunamis in the Pacific in a creative way using the data we have. This could be economic impact of more recent tsunamis (since that part of the data is available) or the relationship between magnitude and source of the waves. Second, they would like to know if there is a better way to predict, educate, and minimize impact to society for islands in the Pacific. 

# Questions and Importance 
There are two questions we have set out to answer. The first is:\
\begin{center}\textbf{What are the patterns in tsunamis that come to Hawaii?}\end{center}\ \
The reason we are looking at this question is to find the patterns of tsunamis that come to Hawaii. This is important because it can help us better prepare the community for impact (via insurance, warning, education) and furthermore minimize the damage to our beloved Hawaiian Islands.\ \

The second question to look at is:\
\begin{center}\textbf{What are the patterns in tsunamis in the Pacific and how to they relate to ones recorded in Hawaii?}\end{center}\ \
This question is important because by being able to see relationships between waves in Hawaii and other places in the Pacific, we can put together our resources in order to better prepare and educate society in order to minimize impact.

# Conclusion

# Recommendation

# Dataset to Analyze
The dataset Fantastic Four will be using will be a tsunami dataset from\ \begin{center}\texttt{https://www.kaggle.com/noaa/seismic-waves/data}\end{center}\ \
This is an NOAA dataset of tsunami data for recordable history. A preview of the column headers of the raw data is the following:
```{r,echo=FALSE, message= FALSE}
tsunami <- as_tibble(read_csv('noaa-tsunami.csv'))

print(tsunami,n=0,width=40)
```
This data contains date, magnitude, location, depth, time, and damage attributes for tsunamis dating back to 2000 BC. This data set needs tidying for the following reasons:\

* The region we are looking at is the Pacific\

* There are a LOT of values are N/A and we need to evaluate/get rid of tsunamis that do not give significant data.\
* For economic impacts, it would be important to look at more recent data, which would be more realistic\
* Simplify columns (total damage, date/time, etc.)

# Subsequent Questions and Importance(delete after we have the individual plots w/ questions)
* How has Tsunami affected an island? Fatalities, house damages, etc.

* Where is the most common occurrence of Tsunami's? Does maximum height have a correlation with how much damage occurs?

* Is there a relationship between time of year a tsunami occurs and how much damage is inflicted?

# Individual Findings

## Lindsay Gettel


## Lexie Marinelli
Question: What is the relationship between the maximum height of a tsunami, the number of fatalities caused by a tsunami, and the number of houses destroyed? How could this correlation help countries prepare for tsunamis in the future? 

```{r,echo=FALSE, message=FALSE}
tsunamiAvg<- tsunami %>%
  filter(YEAR>=1850)%>%
  select(YEAR, MONTH, `STATE/PROVINCE`, ALL_FATALITIES, FATALITIES, MAXIMUM_HEIGHT, INJURY_TOTAL, ALL_HOUSES_DAMAGED)%>%
  group_by(YEAR)%>%
  summarise(avgMaxHeight= mean(MAXIMUM_HEIGHT, na.rm=TRUE), avgFatalities= mean(ALL_FATALITIES,na.rm=TRUE), avgHouseDamage= mean(ALL_HOUSES_DAMAGED,na.rm=TRUE))

tsunamiAvg <- tsunamiAvg%>%
  filter(!is.na(avgMaxHeight), !is.na(avgFatalities), !is.na(avgHouseDamage))

totalAvgHeightFatalHouse <- tsunamiAvg %>%
  summarise(totalAvgHeight=mean(avgMaxHeight, na.rm=TRUE), totalAvgFatal= mean(avgFatalities, na.rm=TRUE), totalAvgDamage= mean(avgHouseDamage,na.rm=TRUE))

sdWaveHeightFatalHouse <- tsunamiAvg %>%
  summarise(standdevWave=sd(avgMaxHeight, na.rm=TRUE),standevFatal=sd(avgFatalities,na.rm=TRUE), standdevHouse= sd(avgHouseDamage, na.rm=TRUE))

tsunamiAvg1 <- tsunamiAvg %>%
  mutate(stdMaxHeight= (avgMaxHeight- 7.611372)/15.25048, stdFatalities= (avgFatalities-4027.23)/14346.33, stdHouseDamage= (avgHouseDamage- 27155.43)/ 66031.33)
tsunamiAvg1 %>%
  ggplot() +geom_smooth(mapping=aes(x=YEAR, y=stdFatalities),color= 'pink', se=FALSE)+geom_smooth(mapping=aes(x=YEAR, y=stdHouseDamage),color= 'green', se=FALSE) +geom_smooth(aes(x=YEAR, y=stdMaxHeight), se=FALSE)+ ggtitle(label="Comparison of Max Wave Height, Fatalities, and House Damage") + xlab(label="Year") +ylab(label= "Standardized Values of Max Height, Fatalities, and House Damage")
```
I chose to plot the relationship between the maximum wave height of a tsunami, the number of fatalities caused, and the number of houses damaged by a tsunami. I created this by standardizing the values for each data set for any time greater than 1850 and plotted the trends on the same axis with the pink being the standardized number of fatalities caused by a tsunami in a year, blue being the standardized value of maximum wave height in a year, and green being the standardized value of the number of houses damaged in result of the tsunami. This information is suprising because common sense would tell us that there would be a positive correlation between the wave height and the number of deaths from the tsunami but this graph shows us that there is in fact a negative correlation with the number of deaths and the wave height. This could be because larger tsunamis are easier to track and gives a country more time to prepare and evacuate, while small tsunamis can be more suprising and give a country less time to evacuate a region. The correlation between the number of houses damaged and the number of fatalities (green and pink respectively) is a positive correlation, which tells us that less people evacuated their houses for weaker tsunnamis. There is a negative correlation between the maximum wave height and the number of houses damaged, which means that people protect their houses with stronger tsunamis but not with the weak ones. This information tells us that overall, people are unprepared to protect themselves and their houses from weak tsunamis possibly because they don't have the right equipment to monitor small storms or a lack of a proper warning system/criteria. This lack of preparedness that can be resolved simply by warning residents nearby earlier by acquiring better equipment and changing the criteria that tells residents earlier when it is time to evacuate. 

## Scott Baker


## Zhenlong Li


# Rainfall Data

## Lindsay Gettel
Individual Questions for Lab 7:
What is the relationship between the tsunami source and the wave, and how does the distance affect the tsunami severity and amount of damage? 
This is significant in analyzing where tsunamis cause the most damage, which could indicate areas that are at greater risk of being impacted by a tsunami. It could possibly lead to formulating predictions of where future tsunamis may occur and how intense they will be. This could help with pre-storm evacuations and safety preparation which would limit injuries, possible deaths, and destruction. Which in turn would limit resource and economical strain following tsunamis.

Rainfall:
```{r, echo=FALSE}
#https://raw.githubusercontent.com/bakerscott/CU-APPM2720/master/m3/Lab8/East_Africa.csv
library(tidyverse)
Malawi<-read_csv("https://raw.githubusercontent.com/bakerscott/CU-APPM2720/master/m3/Lab8/East_Africa.csv")

m1<-Malawi%>%
  select(`Age (calender)`, `BSi MAR (mgSiO2/cm2y)`)%>%
  rename(Year="Age (calender)", BSi="BSi MAR (mgSiO2/cm2y)")

m2<-Malawi%>%
  select(`Age (calender)_1`, `BSi MAR (mgSiO2/cm2y)_1`)%>%
  rename(Year="Age (calender)_1", BSi="BSi MAR (mgSiO2/cm2y)_1")

malawi_2<-left_join(m1, m2)%>% 
  filter(!is.na(Year))

malawi_2%>%
  ggplot(mapping=aes(x=Year, y=BSi))+ geom_jitter()+ geom_smooth(se=FALSE)



```
This plot shows the measured amount of BSi, biogenic silica, in the soil at Lake Malawi for each year, dating back over 2000 years ago. The graph demonstrates that at the amount of BSi present in the lake has been on an upward trend, but also seems to follow a rough sinusoidal pattern.

## Lexie Marinelli
```{r, echo= FALSE, include= FALSE}
#https://raw.githubusercontent.com/bakerscott/CU-APPM2720/master/m3/Lab8/VOI_Rain.csv
VOI <-read_csv("https://raw.githubusercontent.com/bakerscott/CU-APPM2720/master/m3/Lab8/VOI_Rain.csv")
VOI <-VOI %>% 
  select(-X14,-X15) %>%
  gather(Jan,Feb,Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec, key="Month", value= "Rainfall") 

#standardized values in VOIavg data
VOIavg <- VOI %>%
  group_by(Year)%>%
  summarise(avgRainfall=mean(Rainfall, na.rm=TRUE))
VOIavg
totalAvgRain<- VOIavg %>%
  summarise(totalAvg= mean(avgRainfall, na.rm=TRUE))
totalAvgRain

stdev <- VOIavg %>%
  summarise(sd(avgRainfall))
stdev
VOIavg <- VOIavg %>%
  mutate(standardizedRainfall= (avgRainfall- 461.5773)/164.5401)
VOIavg
```
```{r, echo= FALSE}
VOI %>%
  filter(Year>=1960) %>%
  ggplot(mapping=aes(x=Year,y=Rainfall)) +geom_point(aes(color=Month))  + facet_wrap(~Month)+ggtitle(label="Rain trend from 1960-1990") +xlab(label="Year")+ ylab(label= "Level of Rainfall")

VOI %>%
  filter(Year>=1930 & Year<=1960) %>%
  ggplot(mapping=aes(x=Year,y=Rainfall)) +geom_point(aes(color=Month)) +facet_wrap(~Month)+ggtitle(label="Rain trend from 1930-1960") +xlab(label="Year")+ ylab(label= "Level of Rainfall (cm)")
```
This plot shows the months that it rains the most starting from 1960 and going until 1990 and another graph going from 1930 to 1960 to see if rain patterns have changed between the two time periods. From both graphs we can gather that f the rainiest months are winter and spring- November, December, January, February, March, and April. During the 1930-1960 time period, rain patterns were more consistent to previous years. On the other hand, the amount of rain in 1960-1990 is more scattered making it less predictable. 

## Zhenlong Li
Indvidual Questions for Lab 7:
How the warning status relate to the damage to people and environment?

Importance:
Predicting an catastrophe such as tsunami, earthquake and so on will be an cutting-edge technique for people to minimize their losses.

Team application Exercise:
```{r}
tan1 = read.csv("https://raw.githubusercontent.com/bakerscott/CU-APPM2720/master/m3/Lab8/Tanganyika.csv") %>% select(-X, -X.1, -X.2, -X.3, -X.4, -X.5) %>% select(Year.AD, BSi..normalized.)
bsi = rename(tan1, Year = Year.AD)

tan2 = read.csv("https://raw.githubusercontent.com/bakerscott/CU-APPM2720/master/m3/Lab8/Tanganyika.csv") %>% select(-X, -X.1, -X.2, -X.3, -X.4, -X.5) %>% select(Year.AD.1, Charcoal..normalized.)

char = rename(tan2, Year = Year.AD.1)

tan3 = read.csv("https://raw.githubusercontent.com/bakerscott/CU-APPM2720/master/m3/Lab8/Tanganyika.csv") %>% select(-X, -X.1, -X.2, -X.3, -X.4, -X.5) %>% select(Year, TEX86)

tan12 = merge(bsi, char)
Tan = merge(tan12, tan3)
ggplot(data = Tan, mapping = aes(x= Year, y = Charcoal..normalized.)) + geom_jitter() + geom_smooth(method = loess, se = FALSE)
ggplot(data = Tan, mapping = aes(x= Year, y = BSi..normalized.)) + geom_jitter() + geom_smooth(method = loess, se = FALSE)
ggplot(data = Tan, mapping = aes(x= Year, y = TEX86)) + geom_jitter() + geom_smooth(method = loess, se = FALSE)
```

## Scott Baker


# Contributions
* Lindsay:

* Lexie: Created individual plots of the rain data and tsunami data with descriptions. Also helped contribute to the overall question and importance along with who is hiring us. Also created some of the individual questions.

* Li: Added individual question and found the problem that we need to use github link to read data rather than using the local file on each of our computer. Also, finished part of the team application exercise.

* Scott: 
