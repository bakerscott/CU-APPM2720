---
title: "Lab_06"
author: "Fantastic Four"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
COflights <- read_csv("https://files.osf.io/v1/resources/3z5as4pej8/providers/osfstorage/5a8ca28f57103100104584db")

```

# Guiding Question
##What factors lead to on time arrivals? What factors cause flight delays?
It is important to isolate the different events which result in delayed flights and prompt flights in order to improve procedures to make them more effective and give a better assurance that flights will remain on schedule. This information could also help schedule future flights as well as preserve all assets which go into operating airports and flights.

# Overall Findings
There seems to be many factors which all contribute to delayed flights. There are the mesured delays such as weather, security, mechanics, and air traffic. There is also a correlation between the month of the year and the amount of flight delays. January seems to have the most delays, and then the delays decrese until April which then begin to increse until August, followed by incresing delays until December. There is also relevant that the origin and destination of flights impacted the delays, for example, flights from Denver are more likely to be delayed than flights into Denver. There is also a relationship between flight length and how much the flight is delayed. On average two hour flights had the most amount of delays. 

# Individual Findings

## Lexie Marinelli
```{r, echo=FALSE}
COflights %>%
  filter (MONTH, ARR_DELAY >=15) %>%
  count (MONTH) %>%
  mutate("Number of delayed flights"= n)%>%
  ggplot() + geom_smooth(mapping= aes(x= MONTH, y= n), se=FALSE)+geom_point(mapping=aes(x=MONTH, y=n))+ ggtitle(label="Trend of delayed flights throughout the year") +xlab(label="Month")+ ylab(label= "Number of Delayed Flights")

```
I was working on this for close to 3 hrs and this is the best I can do
## Lindsay Gettel
```{r}
#Is a flight more likely to be delayed when leaving DEN or arriving in DEN?
COflights%>%
  filter(ORIGIN=="DEN", DEP_DELAY>=15, !CANCELLED=="1")%>%
  ggplot()+ geom_density(mapping=aes(x=DEP_DELAY), color="blue")+ xlim(0, 180)+ ggtitle("Departure delay for flight leaving DEN")+ ylim(0, 0.03)
COflights%>%
  filter(DEST=="DEN", ARR_DELAY>=15, !CANCELLED=="1")%>%
  ggplot()+ geom_density(mapping=aes(x=ARR_DELAY), color="red")+ xlim(0,180)+ ggtitle("Arrival delay for flight into DEN")
#probability late given the destination was DEN\
allFlights<-filter(COflights, !CANCELLED=="1" & !is.na(CANCELLED))
lateDen<-allFlights%>% filter(DEST=="DEN" & ARR_DELAY>=15)%>% count()
den<-allFlights%>% filter(DEST=="DEN")%>% count()
P_late_toDEN<-lateDen/den
#probability late given orgin was DEN
late_from_DEN<-allFlights%>% filter(ORIGIN=="DEN" & ARR_DELAY>=15)%>% count()
fromDen<-allFlights%>% filter(ORIGIN=="DEN")%>% count()
P_late_fromDen<- late_from_DEN/fromDen
message("Conditional probability a flight is late given the destiation is DEN: ", P_late_toDEN)
message("conditional probability a flight is late given it is leaving DEN: ", P_late_fromDen)
```
The two plots show, respectively, how frequently flights are delayed a given amount of time when a flight is leaving or landing at the Denver airport. Both graphs have a similar distribution, however, flights into DEN have many more flights with a 20minute delay or greater. Calculated conditional probability demonstrate the probability of late arrival given the destination is Denver is 16%, and the probability of a late departure given a flight is leaving Denver is 19%. 
## Zhenlong Li

```{r, echo=FALSE}
filter(COflights,ARR_DELAY >=15)%>% 
  select(DISTANCE)%>%
  count (DISTANCE) %>%
  ggplot()+ geom_jitter( mapping = aes(x= DISTANCE, y= n))+ geom_smooth(mapping = aes(x= DISTANCE, y= n), method = 'loess', se = FALSE) + ylab(label= "Number of Delayed Flights")
```

```{r, echo=FALSE}
filter(COflights,ARR_DELAY >=15)%>% 
  select(AIR_TIME)%>%
  count (AIR_TIME) %>%
  ggplot()+ geom_col( mapping = aes(x= AIR_TIME, y= n), width = 1) + geom_smooth(mapping = aes(x= AIR_TIME, y= n), method = 'loess', se = FALSE) +xlab(label="AIR TIME")+ ylab(label= "Number of Delayed Flights")
```

## Scott Baker

# Contributions
* Lindsay: Created density plots to see how flight delays were impacted given that flights were either into or out of Denver. Calculated conditional probabilities that a flight was late given the destination or origin of a flight was DEN.

* Lexie: 

* Li:

* Scott: 